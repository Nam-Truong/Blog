__NUXT_JSONP__("/blog/20220603-gitlab-pipelines-cleanup", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag){return {data:[{article:{slug:"20220603-gitlab-pipelines-cleanup",description:A,title:"Gitlab Pipeline Cleaning Up",img:"\u002Fblog\u002Fimages\u002F20220603-gitlab-pipelines-cleanup\u002FgitLab_logo.png",alt:A,author:{name:"Namt",bio:"All about Nam Truong",image:"\u002Fblog\u002Fimages\u002Fmy-first-blog-post\u002Ffirst-post-image.jpg"},toc:[{id:B,depth:C,text:D},{id:E,depth:C,text:F}],body:{type:"root",children:[{type:b,tag:G,props:{id:B},children:[{type:b,tag:H,props:{ariaHidden:I,href:"#remove-all-gitlab-pipelines-except-a-specific-number-of-recently-run-ones",tabIndex:J},children:[{type:b,tag:c,props:{className:[K,L]},children:[]}]},{type:a,value:D}]},{type:a,value:h},{type:b,tag:"div",props:{className:["nuxt-content-highlight"]},children:[{type:b,tag:"pre",props:{className:["language-shell","line-numbers"]},children:[{type:b,tag:M,props:{},children:[{type:b,tag:c,props:{className:[d,"shebang","important"]},children:[{type:a,value:"#!\u002Fbin\u002Fbash"}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,k,e]},children:[{type:a,value:"PROJ_ID"}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:"$1"}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,k,e]},children:[{type:a,value:"DELETE_START_AT_PID"}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:"$2"}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,k,e]},children:[{type:a,value:"GITLAB_HOSTNAME"}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:"$3"}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,k,e]},children:[{type:a,value:"GITLAB_ACCESS_TOKEN"}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:"$4"}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,k,e]},children:[{type:a,value:"DELETE"}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"\"deleting\""}]},{type:a,value:"\n\n\n"},{type:b,tag:c,props:{className:[d,"function-name",p]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:"("}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:w}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:"{"}]},{type:a,value:"\n\n        "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:N}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,q,e]},children:[{type:a,value:O}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:P},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:Q}]},{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:R},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:S}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:a,value:"\u002Fpipelines\""}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:x}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:"$DELETE_START_AT_PID"}]},{type:a,value:":"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:s}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:x}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:s}]},{type:a,value:".id "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:x}]},{type:a,value:"  "},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:W}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,t,u]},children:[{type:a,value:"read"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,q,e]},children:[{type:a,value:"-r"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"id"}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:y}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:X}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,t,u]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:m},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:Y}]},{type:a,value:" pipeline#"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:Z}]},{type:a,value:"...\""}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:y}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:N}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,q,e]},children:[{type:a,value:"--request"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"\"DELETE\""}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,q,e]},children:[{type:a,value:O}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:P},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:Q}]},{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:R},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:S}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:a,value:"\u002Fpipelines\u002F"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:Z}]},{type:a,value:m}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:_}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:"}"}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,k,e]},children:[{type:a,value:"RUN_API_LOG"}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"\"**Executing Pipeline API***\""}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,t,u]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:m},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:m}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,k,e]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ab}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:W}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:r}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:"$cmd_output"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"=="}]},{type:a,value:" *"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:Y}]},{type:a,value:"* "},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:s}]},{type:a,value:" \n"},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:X}]},{type:a,value:ac},{type:b,tag:c,props:{className:[d,t,u]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:m},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:m}]},{type:a,value:ac},{type:b,tag:c,props:{className:[d,k,e]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ab}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:_}]},{type:a,value:h}]}]}]},{type:a,value:h},{type:b,tag:G,props:{id:E},children:[{type:b,tag:H,props:{ariaHidden:I,href:"#how-to-execute-the-script",tabIndex:J},children:[{type:b,tag:c,props:{className:[K,L]},children:[]}]},{type:a,value:F}]},{type:a,value:h},{type:b,tag:ad,props:{},children:[{type:a,value:"Suppose that the script is saved as "},{type:b,tag:"em",props:{},children:[{type:a,value:"cleanup_pipelines.sh"}]},{type:a,value:", by executing it as below, we will delete all pipelines of project with id of "},{type:b,tag:ae,props:{},children:[{type:a,value:"10"}]},{type:a,value:", except "},{type:b,tag:ae,props:{},children:[{type:a,value:"3"}]},{type:a,value:" recently-run ones:"}]},{type:a,value:h},{type:b,tag:ad,props:{},children:[{type:b,tag:M,props:{},children:[{type:a,value:".\u002Fcleanup_pipelines.sh 10 3 gitlab.example.com DEK328ICX3235CW$@090"}]}]},{type:a,value:h},{type:b,tag:"info-box",props:{placeholder:af},children:[{type:a,value:ag},{type:b,tag:"template",props:{"#info-box":af},children:[],content:[{type:a,value:ag}]},{type:a,value:h}]}]},dir:"\u002Farticles",path:"\u002Farticles\u002F20220603-gitlab-pipelines-cleanup",extension:".md",createdAt:"2022-06-03T03:11:54.921Z",updatedAt:"2025-01-15T02:52:52.321Z"},prev:{slug:"20220114-sudoku",title:"Sudoku Online"},next:{slug:"20250115-annas-archive",title:"Anna's Archive"}}],fetch:{},mutations:[]}}("text","element","span","token","variable"," ","punctuation","\n","operator","string","assign-left","=","\"","\n\n","keyword","function","parameter","[","]","builtin","class-name","command_line",")","|",";","echo","Clean Up Pipelines","remove-all-gitlab-pipelines-except-a-specific-number-of-recently-run-ones",2,"Remove All Gitlab Pipelines Except A Specific Number of Recently-Run Ones","how-to-execute-the-script","How to execute the script","h2","a","true",-1,"icon","icon-link","code","curl","--header","\"PRIVATE-TOKEN: ","$GITLAB_ACCESS_TOKEN","\"https:\u002F\u002F","$GITLAB_HOSTNAME","\u002Fapi\u002Fv4\u002Fprojects\u002F","$PROJ_ID"," jq .","while","do","$DELETE","$id","done","$RUN_API_LOG","cmd_output","$(","\n        ","p","strong","","\n  ")));